# 🔔 FlowerStudio 推播通知測試指南

## 🎯 測試目標
驗證 FlowerStudio 應用程式的本地推播通知功能是否正常運作。

## 📋 測試準備
1. ✅ 應用程式已成功建置並運行
2. ✅ 本地推播通知管理器已整合
3. ✅ 推播通知授權機制已實現

## 🧪 測試步驟

### 1. 測試推播通知授權
- 首次啟動應用程式時，系統會自動請求推播通知權限
- 請點擊「允許」來授權推播通知

### 2. 測試基本推播功能
**客戶測試推播**
- 在首頁右上角找到「🧪」測試按鈕
- 點擊測試按鈕
- 應該會在 2 秒後收到測試推播通知

**業主測試推播**
- 在首頁左上角找到「💼」業主測試按鈕
- 點擊按鈕
- 應該會收到新訂單通知（2秒後）和工作提醒通知（5秒後）

### 3. 測試訂單確認推播
**方法 1：單筆訂單**
1. 進入「花藝作品」頁面
2. 選擇任一產品進入詳情頁
3. 點擊「立即訂購」
4. 填寫完整的訂單資訊
5. 點擊「確認訂購」
6. 應該會收到：
   - 客戶訂單確認推播（1秒後）
   - 業主新訂單通知（2秒後）

**方法 2：購物車批量訂單**
1. 將多個產品加入購物車
2. 進入購物車頁面
3. 點擊「前往結帳」
4. 填寫完整的訂單資訊
5. 點擊「確認訂購」
6. 應該會收到：
   - 客戶批量訂單確認推播（1秒後）
   - 業主批量新訂單通知（2秒後）

### 4. 測試業主管理功能
1. 進入「業主管理」標籤頁
2. 查看今日營運概況統計
3. 測試快速操作按鈕：
   - 「測試通知」：發送業主測試推播
   - 「每日提醒」：發送工作提醒
   - 「營業提醒」：發送營業相關提醒
   - 「庫存提醒」：發送庫存檢查提醒
4. 點擊待處理訂單可更新訂單狀態
5. 點擊右上角「📊」按鈕發送每日摘要

## 📱 推播通知內容

### 測試通知
- **標題**：🧪 測試通知
- **內容**：這是一個測試推播通知，如果您看到這個訊息，表示推播功能正常運作！

### 單筆訂單確認
- **標題**：🌸 訂單確認
- **內容**：親愛的 [客戶姓名]，您的訂單 #[訂單編號] 已成功建立！我們將盡快為您準備。

### 批量訂單確認
- **標題**：🌸 批量訂單確認
- **內容**：親愛的 [客戶姓名]，您的 [數量] 筆訂單已成功建立！訂單編號：[編號列表]

### 業主新訂單通知
- **標題**：💼 新訂單通知
- **內容**：您有一筆新訂單！客戶：[客戶姓名]，訂單編號：#[訂單編號]。請及時處理。

### 業主批量訂單通知
- **標題**：💼 批量新訂單通知
- **內容**：您收到 [數量] 筆新訂單！客戶：[客戶姓名]。訂單編號：[編號列表]

### 業主提醒通知
- **標題**：⏰ [提醒類型]
- **內容**：各種工作提醒內容（每日工作、營業提醒、庫存檢查等）

### 訂單狀態更新
- **標題**：📦 訂單狀態更新
- **內容**：親愛的 [客戶姓名]，您的訂單 #[訂單編號] 狀態已更新為：[狀態]

## 🔍 故障排除

### 如果沒有收到推播通知：

1. **檢查推播權限**
   - 進入 iOS 設定 > 通知 > FlowerStudio
   - 確保「允許通知」已開啟

2. **檢查應用程式日誌**
   - 在 Xcode 中查看控制台輸出
   - 尋找以下訊息：
     - `✅ 本地推播通知授權成功`
     - `✅ 推播通知已發送`
     - `❌ 推播通知發送失敗`

3. **重新授權推播通知**
   - 刪除並重新安裝應用程式
   - 或在 iOS 設定中重置推播權限

### 常見問題

**Q: 為什麼在模擬器中看不到推播通知？**
A: 確保：
- 模擬器已啟動並在前台運行
- 推播權限已正確授權
- 應用程式沒有在前台時推播才會顯示

**Q: Firebase 推播通知為什麼不工作？**
A: 目前使用的是本地推播通知系統，Firebase 推播需要：
- 真實的 GoogleService-Info.plist 配置文件
- 實體 iOS 設備（模擬器不支援 Firebase 推播）
- 正確的 APNs 證書配置

## 🎉 成功標準

如果以下測試都通過，表示推播通知功能正常：

**基本功能**
- [ ] 應用程式成功請求推播權限
- [ ] 客戶測試按鈕能發送測試推播
- [ ] 業主測試按鈕能發送業主推播

**訂單推播**
- [ ] 單筆訂單建立後客戶能收到確認推播
- [ ] 單筆訂單建立後業主能收到新訂單通知
- [ ] 批量訂單建立後客戶能收到確認推播
- [ ] 批量訂單建立後業主能收到批量訂單通知
- [ ] 推播內容正確顯示客戶姓名和訂單資訊

**業主管理功能**
- [ ] 業主儀表板顯示正確的統計數據
- [ ] 快速操作按鈕能發送各種提醒推播
- [ ] 訂單狀態更新後客戶能收到狀態推播
- [ ] 每日摘要推播功能正常

## 🚀 下一步

推播通知功能測試完成後，可以考慮：
1. 整合真實的 Firebase 專案來支援遠端推播
2. 添加訂單狀態更新推播
3. 實現推播通知的個性化設定
4. 添加推播通知的統計和分析功能 